{"ast":null,"code":"var _jsxFileName = \"D:\\\\fashion-shirt-shop\\\\DATN\\\\src\\\\main\\\\resources\\\\templates\\\\fashionshop-ui\\\\src\\\\layouts\\\\BanHangTaiQuay\\\\component\\\\PaymentModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nimport NumberFormatCustom from \"./NumberFormatCustom\";\nimport { Dialog, DialogTitle, DialogContent, DialogActions, IconButton, Box, Typography, TextField, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Button } from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport SoftButton from \"components/SoftButton\";\nimport { toast } from \"react-toastify\";\n\n// import { IMaskInput } from \"react-imask\";\n\n// Hàm tiện ích định dạng tiền tệ\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formatCurrency = amount => {\n  if (typeof amount !== \"number\" || isNaN(amount)) return \"0 VND\";\n  return new Intl.NumberFormat(\"vi-VN\", {\n    style: \"currency\",\n    currency: \"VND\"\n  }).format(amount);\n};\nfunction PaymentModal({\n  open,\n  onClose,\n  totalAmount,\n  onConfirm,\n  hoaDonId\n}) {\n  _s();\n  // State cho dữ liệu thanh toán cũ từ API\n  const [previousPayments, setPreviousPayments] = useState([]);\n  // State cho dữ liệu thanh toán mới được thêm trong UI\n  const [newPayments, setNewPayments] = useState([]);\n\n  // State cho form nhập liệu\n  const [paymentMethod, setPaymentMethod] = useState(\"cash\");\n  const [amount, setAmount] = useState(\"\");\n  const [transactionCode, setTransactionCode] = useState(\"\");\n  const [transactionCodeError, setTransactionCodeError] = useState(\"\");\n\n  // Tự động gọi API để lấy lịch sử thanh toán khi modal được mở\n  useEffect(() => {\n    const fetchPreviousPayments = async () => {\n      if (!hoaDonId) {\n        setPreviousPayments([]);\n        return;\n      }\n      try {\n        const response = await axios.get(`http://localhost:8080/chiTietThanhToan/${hoaDonId}/chi-tiet-thanh-toan`);\n        setPreviousPayments(response.data || []);\n      } catch (error) {\n        console.error(\"Lỗi khi lấy lịch sử thanh toán:\", error);\n        setPreviousPayments([]);\n      }\n    };\n    if (open) {\n      fetchPreviousPayments();\n    }\n  }, [open, hoaDonId]);\n\n  // Gộp 2 danh sách thanh toán để hiển thị và tính toán\n  const allPayments = useMemo(() => [...previousPayments, ...newPayments], [previousPayments, newPayments]);\n  const totalPaid = useMemo(() => {\n    return allPayments.reduce((sum, p) => sum + (p.soTienThanhToan || 0), 0);\n  }, [allPayments]);\n\n  // Tính số tiền còn thiếu\n  const amountOwed = totalAmount - totalPaid;\n\n  // Xử lý khi thêm một lần thanh toán mới\n  const handleAddPayment = () => {\n    const paymentAmount = Number(String(amount).replace(/\\./g, \"\"));\n    if (!paymentAmount || paymentAmount <= 0) {\n      toast.warn(\"Vui lòng nhập số tiền hợp lệ.\");\n      return;\n    }\n    if (paymentMethod === \"transfer\" && !transactionCode.trim()) {\n      setTransactionCodeError(\"Vui lòng nhập mã giao dịch.\");\n      return;\n    }\n    setTransactionCodeError(\"\");\n    if (paymentMethod === \"transfer\" && !transactionCode.trim()) {\n      // Set nội dung lỗi thay vì alert\n      setTransactionCodeError(\"Vui lòng nhập mã giao dịch.\");\n      return; // Dừng lại\n    }\n\n    // Nếu không có lỗi, đảm bảo clear thông báo lỗi cũ (nếu có)\n    setTransactionCodeError(\"\");\n\n    // Tạo object thanh toán mới với key nhất quán với API\n    const newPayment = {\n      idHinhThucThanhToan: paymentMethod === \"cash\" ? 1 : 2,\n      idHoaDon: hoaDonId,\n      maGiaoDich: paymentMethod === \"transfer\" ? transactionCode : null,\n      soTienThanhToan: paymentAmount,\n      trangThaiThanhToan: 1\n    };\n    setNewPayments([...newPayments, newPayment]);\n    setAmount(\"\");\n    setTransactionCode(\"\");\n  };\n\n  // Xử lý khi xác nhận thanh toán\n  const handleConfirm = () => {\n    if (amountOwed > 0) {\n      toast.error(`Còn thiếu ${formatCurrency(amountOwed)}. Vui lòng thanh toán đủ.`);\n      return;\n    }\n    // Chỉ gửi về cho component cha những thanh toán MỚI\n    onConfirm(newPayments);\n    handleClose();\n  };\n\n  // Xử lý khi đóng modal\n  const handleClose = () => {\n    // Dọn dẹp tất cả state để chuẩn bị cho lần mở tiếp theo\n    setPreviousPayments([]);\n    setNewPayments([]);\n    setAmount(\"\");\n    setTransactionCode(\"\");\n    onClose();\n  };\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: open,\n    onClose: handleClose,\n    fullWidth: true,\n    maxWidth: \"md\",\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          fontWeight: \"bold\",\n          children: \"THANH TO\\xC1N\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleClose,\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      dividers: true,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        mb: 2,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: \"T\\u1ED5ng ti\\u1EC1n h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          color: \"primary.main\",\n          fontWeight: \"bold\",\n          children: formatCurrency(totalAmount)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        mb: 3,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: \"Ti\\u1EC1n thi\\u1EBFu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          color: \"error.main\",\n          fontWeight: \"bold\",\n          children: formatCurrency(amountOwed > 0 ? amountOwed : 0)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        variant: \"outlined\",\n        sx: {\n          p: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          gap: 2,\n          mb: 2,\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            size: \"medium\",\n            sx: {\n              borderRadius: 2,\n              textTransform: \"none\",\n              fontWeight: 600,\n              fontSize: \"1rem\",\n              color: \"#49a3f1\",\n              borderColor: \"#49a3f1\",\n              boxShadow: \"none\",\n              \"&:hover\": {\n                borderColor: \"#1769aa\",\n                background: \"#f0f6fd\",\n                color: \"#1769aa\"\n              }\n            },\n            onClick: () => setPaymentMethod(\"transfer\"),\n            children: \"Chuy\\u1EC3n kho\\u1EA3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            size: \"medium\",\n            sx: {\n              borderRadius: 2,\n              textTransform: \"none\",\n              fontWeight: 600,\n              fontSize: \"1rem\",\n              color: \"#49a3f1\",\n              borderColor: \"#49a3f1\",\n              boxShadow: \"none\",\n              \"&:hover\": {\n                borderColor: \"#1769aa\",\n                background: \"#f0f6fd\",\n                color: \"#1769aa\"\n              }\n            },\n            onClick: () => setPaymentMethod(\"cash\"),\n            children: \"Ti\\u1EC1n m\\u1EB7t\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          gap: 2,\n          alignItems: \"flex-start\",\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Ti\\u1EC1n kh\\xE1ch \\u0111\\u01B0a\",\n            value: amount,\n            onChange: value => {\n              setAmount(value);\n            },\n            sx: {\n              flexGrow: 1\n            },\n            autoFocus: true,\n            InputProps: {\n              inputComponent: NumberFormatCustom\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 11\n          }, this), paymentMethod === \"transfer\" && /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"M\\xE3 giao d\\u1ECBch\",\n            value: transactionCode,\n            onChange: e => {\n              setTransactionCode(e.target.value);\n              // Xóa lỗi ngay khi người dùng nhập\n              if (transactionCodeError) {\n                setTransactionCodeError(\"\");\n              }\n            },\n            sx: {\n              flexGrow: 1\n            }\n            // THÊM 2 PROPS NÀY ĐỂ HIỂN THỊ LỖI\n            ,\n            error: !!transactionCodeError // `!!` chuyển chuỗi lỗi thành boolean (true/false)\n            ,\n            helperText: transactionCodeError // Hiển    thị nội dung lỗi bên dưới\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SoftButton, {\n            onClick: handleAddPayment,\n            variant: \"outlined\",\n            size: \"medium\",\n            sx: {\n              borderRadius: 2,\n              textTransform: \"none\",\n              fontWeight: 400,\n              color: \"#49a3f1\",\n              borderColor: \"#49a3f1\",\n              boxShadow: \"none\",\n              \"&:hover\": {\n                borderColor: \"#1769aa\",\n                background: \"#f0f6fd\",\n                color: \"#1769aa\"\n              }\n            },\n            children: \"Th\\xEAm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        sx: {\n          mt: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            sx: {\n              display: \"table-header-group\",\n              backgroundColor: \"#f5f5f5\"\n            },\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"STT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"M\\xE3 giao d\\u1ECBch\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Ph\\u01B0\\u01A1ng th\\u1EE9c\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"S\\u1ED1 ti\\u1EC1n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: [allPayments.length === 0 ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 4,\n                align: \"center\",\n                children: \"Ch\\u01B0a c\\xF3 thanh to\\xE1n n\\xE0o\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this) : allPayments.map((p, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n              sx: {\n                backgroundColor: newPayments.includes(p) ? \"#e8f5e9\" : \"inherit\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: p.maGiaoDich || \"---\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: p.idHinhThucThanhToan === 1 ? \"Tiền mặt\" : \"Chuyển khoản\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: formatCurrency(p.soTienThanhToan)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n      sx: {\n        p: \"16px 24px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(SoftButton, {\n        variant: \"gradient\",\n        color: \"success\",\n        size: \"large\",\n        onClick: handleConfirm,\n        fullWidth: true,\n        sx: {\n          borderRadius: 2,\n          textTransform: \"none\"\n        },\n        children: \"X\\xE1c nh\\u1EADn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n}\n\n// Định nghĩa PropTypes để quản lý props tốt hơn\n_s(PaymentModal, \"sQYuHYzJuwSv5+T3cldae93T9Ks=\");\n_c = PaymentModal;\nPaymentModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  totalAmount: PropTypes.number.isRequired,\n  onConfirm: PropTypes.func.isRequired,\n  hoaDonId: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default PaymentModal;\nvar _c;\n$RefreshReg$(_c, \"PaymentModal\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","PropTypes","axios","NumberFormatCustom","Dialog","DialogTitle","DialogContent","DialogActions","IconButton","Box","Typography","TextField","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Button","CloseIcon","SoftButton","toast","jsxDEV","_jsxDEV","formatCurrency","amount","isNaN","Intl","NumberFormat","style","currency","format","PaymentModal","open","onClose","totalAmount","onConfirm","hoaDonId","_s","previousPayments","setPreviousPayments","newPayments","setNewPayments","paymentMethod","setPaymentMethod","setAmount","transactionCode","setTransactionCode","transactionCodeError","setTransactionCodeError","fetchPreviousPayments","response","get","data","error","console","allPayments","totalPaid","reduce","sum","p","soTienThanhToan","amountOwed","handleAddPayment","paymentAmount","Number","String","replace","warn","trim","newPayment","idHinhThucThanhToan","idHoaDon","maGiaoDich","trangThaiThanhToan","handleConfirm","handleClose","fullWidth","maxWidth","children","display","justifyContent","alignItems","variant","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","onClick","dividers","mb","color","sx","gap","size","borderRadius","textTransform","fontSize","borderColor","boxShadow","background","label","value","onChange","flexGrow","autoFocus","InputProps","inputComponent","e","target","helperText","component","mt","backgroundColor","align","length","colSpan","map","index","includes","_c","propTypes","bool","isRequired","func","number","oneOfType","string","$RefreshReg$"],"sources":["D:/fashion-shirt-shop/DATN/src/main/resources/templates/fashionshop-ui/src/layouts/BanHangTaiQuay/component/PaymentModal.jsx"],"sourcesContent":["import React, { useState, useMemo, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nimport NumberFormatCustom from \"./NumberFormatCustom\";\n\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  IconButton,\n  Box,\n  Typography,\n  TextField,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Button,\n} from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport SoftButton from \"components/SoftButton\";\nimport { toast } from \"react-toastify\";\n\n\n// import { IMaskInput } from \"react-imask\";\n\n// Hàm tiện ích định dạng tiền tệ\nconst formatCurrency = (amount) => {\n  if (typeof amount !== \"number\" || isNaN(amount)) return \"0 VND\";\n  return new Intl.NumberFormat(\"vi-VN\", { style: \"currency\", currency: \"VND\" }).format(amount);\n};\n\nfunction PaymentModal({ open, onClose, totalAmount, onConfirm, hoaDonId }) {\n  // State cho dữ liệu thanh toán cũ từ API\n  const [previousPayments, setPreviousPayments] = useState([]);\n  // State cho dữ liệu thanh toán mới được thêm trong UI\n  const [newPayments, setNewPayments] = useState([]);\n\n  // State cho form nhập liệu\n  const [paymentMethod, setPaymentMethod] = useState(\"cash\");\n  const [amount, setAmount] = useState(\"\");\n  const [transactionCode, setTransactionCode] = useState(\"\");\n  const [transactionCodeError, setTransactionCodeError] = useState(\"\");\n\n  // Tự động gọi API để lấy lịch sử thanh toán khi modal được mở\n  useEffect(() => {\n    const fetchPreviousPayments = async () => {\n      if (!hoaDonId) {\n        setPreviousPayments([]);\n        return;\n      }\n      try {\n        const response = await axios.get(\n          `http://localhost:8080/chiTietThanhToan/${hoaDonId}/chi-tiet-thanh-toan`\n        );\n        setPreviousPayments(response.data || []);\n      } catch (error) {\n        console.error(\"Lỗi khi lấy lịch sử thanh toán:\", error);\n        setPreviousPayments([]);\n      }\n    };\n\n    if (open) {\n      fetchPreviousPayments();\n    }\n  }, [open, hoaDonId]);\n\n  // Gộp 2 danh sách thanh toán để hiển thị và tính toán\n  const allPayments = useMemo(\n    () => [...previousPayments, ...newPayments],\n    [previousPayments, newPayments]\n  );\n\n  const totalPaid = useMemo(() => {\n    return allPayments.reduce((sum, p) => sum + (p.soTienThanhToan || 0), 0);\n  }, [allPayments]);\n\n  // Tính số tiền còn thiếu\n  const amountOwed = totalAmount - totalPaid;\n\n  // Xử lý khi thêm một lần thanh toán mới\n  const handleAddPayment = () => {\n \n    const paymentAmount = Number(String(amount).replace(/\\./g, \"\"));\n\n    if (!paymentAmount || paymentAmount <= 0) {\n      toast.warn(\"Vui lòng nhập số tiền hợp lệ.\");\n      return;\n    }\n\n    if (paymentMethod === \"transfer\" && !transactionCode.trim()) {\n      setTransactionCodeError(\"Vui lòng nhập mã giao dịch.\");\n      return;\n    }\n    setTransactionCodeError(\"\");\n\n    if (paymentMethod === \"transfer\" && !transactionCode.trim()) {\n      // Set nội dung lỗi thay vì alert\n      setTransactionCodeError(\"Vui lòng nhập mã giao dịch.\");\n      return; // Dừng lại\n    }\n\n    // Nếu không có lỗi, đảm bảo clear thông báo lỗi cũ (nếu có)\n    setTransactionCodeError(\"\");\n\n    // Tạo object thanh toán mới với key nhất quán với API\n    const newPayment = {\n      idHinhThucThanhToan: paymentMethod === \"cash\" ? 1 : 2,\n      idHoaDon: hoaDonId,\n      maGiaoDich: paymentMethod === \"transfer\" ? transactionCode : null,\n       soTienThanhToan: paymentAmount, \n      trangThaiThanhToan: 1,\n    };\n   \n    setNewPayments([...newPayments, newPayment]);\n    setAmount(\"\");\n    setTransactionCode(\"\");\n  };\n\n  // Xử lý khi xác nhận thanh toán\n  const handleConfirm = () => {\n    if (amountOwed > 0) {\n      toast.error(`Còn thiếu ${formatCurrency(amountOwed)}. Vui lòng thanh toán đủ.`);\n      return;\n    }\n    // Chỉ gửi về cho component cha những thanh toán MỚI\n    onConfirm(newPayments);\n    handleClose();\n  };\n\n  // Xử lý khi đóng modal\n  const handleClose = () => {\n    // Dọn dẹp tất cả state để chuẩn bị cho lần mở tiếp theo\n    setPreviousPayments([]);\n    setNewPayments([]);\n    setAmount(\"\");\n    setTransactionCode(\"\");\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"md\">\n      <DialogTitle>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n          <Typography variant=\"h5\" fontWeight=\"bold\">\n            THANH TOÁN\n          </Typography>\n          <IconButton onClick={handleClose}>\n            <CloseIcon />\n          </IconButton>\n        </Box>\n      </DialogTitle>\n      <DialogContent dividers>\n        {/* Phần hiển thị tổng tiền */}\n        <Box display=\"flex\" justifyContent=\"space-between\" mb={2}>\n          <Typography variant=\"h6\">Tổng tiền hàng</Typography>\n          <Typography variant=\"h6\" color=\"primary.main\" fontWeight=\"bold\">\n            {formatCurrency(totalAmount)}\n          </Typography>\n        </Box>\n        <Box display=\"flex\" justifyContent=\"space-between\" mb={3}>\n          <Typography variant=\"h6\">Tiền thiếu</Typography>\n          <Typography variant=\"h6\" color=\"error.main\" fontWeight=\"bold\">\n            {formatCurrency(amountOwed > 0 ? amountOwed : 0)}\n          </Typography>\n        </Box>\n\n        {/* Phần form nhập liệu */}\n        <Paper variant=\"outlined\" sx={{ p: 2 }}>\n          <Box display=\"flex\" gap={2} mb={2}>\n            <Button\n           variant=\"outlined\"\n           \n                    size=\"medium\"\n                    sx={{\n                      borderRadius: 2,\n                      textTransform: \"none\",\n                      fontWeight: 600,\n                      fontSize: \"1rem\",\n                      color: \"#49a3f1\",\n                      borderColor: \"#49a3f1\",\n                      boxShadow: \"none\",\n                      \"&:hover\": {\n                        borderColor: \"#1769aa\",\n                        background: \"#f0f6fd\",\n                        color: \"#1769aa\",\n                      },\n                    }}\n              onClick={() => setPaymentMethod(\"transfer\")}\n            >\n              Chuyển khoản\n            </Button>\n            <Button\n               variant=\"outlined\"\n               size=\"medium\"\n                    sx={{\n                      borderRadius: 2,\n                      textTransform: \"none\",\n                       fontWeight: 600,\n                      fontSize: \"1rem\",\n                      color: \"#49a3f1\",\n                      borderColor: \"#49a3f1\",\n                      boxShadow: \"none\",\n                      \"&:hover\": {\n                        borderColor: \"#1769aa\",\n                        background: \"#f0f6fd\",\n                        color: \"#1769aa\",\n                      },\n                    }}\n              onClick={() => setPaymentMethod(\"cash\")}\n            >\n              Tiền mặt\n            </Button>\n          </Box>\n          <Box display=\"flex\" gap={2} alignItems=\"flex-start\">\n          <TextField\n label=\"Tiền khách đưa\"\n value={amount}\n onChange={(value) => {\n          \n                 \n                  setAmount(value);\n                }}\n sx={{ flexGrow: 1 }}\n autoFocus\nInputProps={{ inputComponent: NumberFormatCustom }}\n />\n            {paymentMethod === \"transfer\" && (\n              <TextField\n                label=\"Mã giao dịch\"\n                value={transactionCode}\n                onChange={(e) => {\n                  setTransactionCode(e.target.value);\n                  // Xóa lỗi ngay khi người dùng nhập\n                  if (transactionCodeError) {\n                    setTransactionCodeError(\"\");\n                  }\n                }}\n                sx={{ flexGrow: 1 }}\n                // THÊM 2 PROPS NÀY ĐỂ HIỂN THỊ LỖI\n                error={!!transactionCodeError} // `!!` chuyển chuỗi lỗi thành boolean (true/false)\n                helperText={transactionCodeError} // Hiển    thị nội dung lỗi bên dưới\n              />\n            )}\n            <SoftButton\n              onClick={handleAddPayment}\n              variant=\"outlined\"\n              size=\"medium\"\n              sx={{\n                borderRadius: 2,\n                textTransform: \"none\",\n                fontWeight: 400,\n                color: \"#49a3f1\",\n                borderColor: \"#49a3f1\",\n                boxShadow: \"none\",\n                \"&:hover\": {\n                  borderColor: \"#1769aa\",\n                  background: \"#f0f6fd\",\n                  color: \"#1769aa\",\n                },\n              }}\n            >\n              Thêm\n            </SoftButton>\n          </Box>\n        </Paper>\n\n        {/* Phần bảng hiển thị chi tiết thanh toán */}\n        <TableContainer component={Paper} sx={{ mt: 3 }}>\n          <Table>\n            <TableHead sx={{ display: \"table-header-group\", backgroundColor: \"#f5f5f5\" }}>\n              <TableRow>\n                <TableCell>STT</TableCell>\n                <TableCell>Mã giao dịch</TableCell>\n                <TableCell>Phương thức</TableCell>\n                <TableCell align=\"right\">Số tiền</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {allPayments.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={4} align=\"center\">\n                    Chưa có thanh toán nào\n                  </TableCell>\n                </TableRow>\n              ) : (\n                allPayments.map((p, index) => (\n                  <TableRow\n                    key={index}\n                    sx={{ backgroundColor: newPayments.includes(p) ? \"#e8f5e9\" : \"inherit\" }}\n                  >\n                    <TableCell>{index + 1}</TableCell>\n                    <TableCell>{p.maGiaoDich || \"---\"}</TableCell>\n                    <TableCell>\n                      {p.idHinhThucThanhToan === 1 ? \"Tiền mặt\" : \"Chuyển khoản\"}\n                    </TableCell>\n                    <TableCell align=\"right\">{formatCurrency(p.soTienThanhToan)}</TableCell>\n                  </TableRow>\n                ))\n              )}\n              {/* Hàng hiển thị tiền thừa */}\n              <TableRow>\n               \n                <TableCell align=\"right\">\n                \n                </TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </DialogContent>\n      <DialogActions sx={{ p: \"16px 24px\" }}>\n        <SoftButton\n          variant=\"gradient\"\n          color=\"success\"\n          size=\"large\"\n          onClick={handleConfirm}\n          fullWidth\n          sx={{\n                      borderRadius: 2,\n                      textTransform: \"none\"}}\n        >\n          Xác nhận\n        </SoftButton>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\n// Định nghĩa PropTypes để quản lý props tốt hơn\nPaymentModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  totalAmount: PropTypes.number.isRequired,\n  onConfirm: PropTypes.func.isRequired,\n  hoaDonId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n};\n\nexport default PaymentModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}