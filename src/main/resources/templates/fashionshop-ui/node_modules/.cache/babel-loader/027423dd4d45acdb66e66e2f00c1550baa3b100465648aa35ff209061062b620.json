{"ast":null,"code":"var _jsxFileName = \"D:\\\\fashion-shirt-shop\\\\DATN\\\\src\\\\main\\\\resources\\\\templates\\\\fashionshop-ui\\\\src\\\\layouts\\\\admin\\\\HoaDon\\\\InHoaDon\\\\InHoaDon.jsx\",\n  _s = $RefreshSig$();\n// src/components/PdfViewerModalMui.js\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from \"prop-types\";\n// Import các component từ Material-UI\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport IconButton from '@mui/material/IconButton';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Box from '@mui/material/Box';\nimport CloseIcon from '@mui/icons-material/Close';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst InHoaDon = ({\n  isOpen,\n  onClose,\n  hoaDonId\n}) => {\n  _s();\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // --- Phần logic fetch dữ liệu giữ nguyên, không thay đổi ---\n  useEffect(() => {\n    if (isOpen && hoaDonId) {\n      setIsLoading(true);\n      setError(null);\n      const fetchPdf = async () => {\n        try {\n          const apiUrl = `http://localhost:8080/api/hoa-don/${hoaDonId}/pdf`;\n          const response = await fetch(apiUrl);\n          if (!response.ok) throw new Error('Không thể tải hóa đơn.');\n          const pdfBlob = await response.blob();\n          const newPdfUrl = URL.createObjectURL(pdfBlob);\n          setPdfUrl(newPdfUrl);\n        } catch (err) {\n          setError(err.message);\n        } finally {\n          setIsLoading(false);\n        }\n      };\n      fetchPdf();\n    }\n    return () => {\n      if (pdfUrl) {\n        URL.revokeObjectURL(pdfUrl);\n        setPdfUrl(null);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, hoaDonId]);\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: isOpen,\n    onClose: onClose,\n    fullWidth: true,\n    maxWidth: \"lg\" // Có thể chọn 'md', 'lg', 'xl' cho phù hợp\n    ,\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      children: [\"H\\xF3a \\u0111\\u01A1n chi ti\\u1EBFt\", /*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"close\",\n        onClick: onClose,\n        sx: {\n          position: 'absolute',\n          right: 8,\n          top: 8,\n          color: theme => theme.palette.grey[500]\n        },\n        children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      dividers: true,\n      sx: {\n        height: '80vh'\n      },\n      children: [isLoading && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '100%'\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '100%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'red'\n          },\n          children: [\"L\\u1ED7i: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), pdfUrl && !error && /*#__PURE__*/_jsxDEV(\"iframe\", {\n        src: pdfUrl,\n        title: `Hóa đơn ${hoaDonId}`,\n        width: \"100%\",\n        height: \"100%\",\n        style: {\n          border: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(InHoaDon, \"vSFiCj0Y2kjGet6uXSJ8vEfcHes=\");\n_c = InHoaDon;\nInHoaDon.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  hoaDonId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired\n};\nexport default InHoaDon;\nvar _c;\n$RefreshReg$(_c, \"InHoaDon\");","map":{"version":3,"names":["React","useState","useEffect","PropTypes","Dialog","DialogTitle","DialogContent","IconButton","CircularProgress","Box","CloseIcon","jsxDEV","_jsxDEV","InHoaDon","isOpen","onClose","hoaDonId","_s","pdfUrl","setPdfUrl","isLoading","setIsLoading","error","setError","fetchPdf","apiUrl","response","fetch","ok","Error","pdfBlob","blob","newPdfUrl","URL","createObjectURL","err","message","revokeObjectURL","open","fullWidth","maxWidth","children","onClick","sx","position","right","top","color","theme","palette","grey","fileName","_jsxFileName","lineNumber","columnNumber","dividers","height","display","justifyContent","alignItems","style","src","title","width","border","_c","propTypes","bool","isRequired","func","oneOfType","string","number","$RefreshReg$"],"sources":["D:/fashion-shirt-shop/DATN/src/main/resources/templates/fashionshop-ui/src/layouts/admin/HoaDon/InHoaDon/InHoaDon.jsx"],"sourcesContent":["// src/components/PdfViewerModalMui.js\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from \"prop-types\";\n// Import các component từ Material-UI\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport IconButton from '@mui/material/IconButton';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Box from '@mui/material/Box';\nimport CloseIcon from '@mui/icons-material/Close';\n\nconst InHoaDon = ({ isOpen, onClose, hoaDonId }) => {\n  const [pdfUrl, setPdfUrl] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // --- Phần logic fetch dữ liệu giữ nguyên, không thay đổi ---\n  useEffect(() => {\n    if (isOpen && hoaDonId) {\n      setIsLoading(true);\n      setError(null);\n      const fetchPdf = async () => {\n        try {\n          const apiUrl = `http://localhost:8080/api/hoa-don/${hoaDonId}/pdf`;\n          const response = await fetch(apiUrl);\n          if (!response.ok) throw new Error('Không thể tải hóa đơn.');\n          \n          const pdfBlob = await response.blob();\n          const newPdfUrl = URL.createObjectURL(pdfBlob);\n          setPdfUrl(newPdfUrl);\n\n        } catch (err) {\n          setError(err.message);\n        } finally {\n          setIsLoading(false);\n        }\n      };\n      fetchPdf();\n    }\n    return () => {\n      if (pdfUrl) {\n        URL.revokeObjectURL(pdfUrl);\n        setPdfUrl(null);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, hoaDonId]);\n\n  return (\n    <Dialog\n      open={isOpen}\n      onClose={onClose}\n      fullWidth={true}\n      maxWidth=\"lg\" // Có thể chọn 'md', 'lg', 'xl' cho phù hợp\n    >\n      <DialogTitle>\n        Hóa đơn chi tiết\n        <IconButton\n          aria-label=\"close\"\n          onClick={onClose}\n          sx={{\n            position: 'absolute',\n            right: 8,\n            top: 8,\n            color: (theme) => theme.palette.grey[500],\n          }}\n        >\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n\n      <DialogContent dividers sx={{ height: '80vh' }}>\n        {isLoading && (\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\n            <CircularProgress />\n          </Box>\n        )}\n        {error && (\n            <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\n                <p style={{ color: 'red' }}>Lỗi: {error}</p>\n            </Box>\n        )}\n        {pdfUrl && !error && (\n          <iframe\n            src={pdfUrl}\n            title={`Hóa đơn ${hoaDonId}`}\n            width=\"100%\"\n            height=\"100%\"\n            style={{ border: 'none' }}\n          />\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n};\nInHoaDon.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  hoaDonId: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]).isRequired,\n};\nexport default InHoaDon;"],"mappings":";;AAAA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,SAAS,MAAM,YAAY;AAClC;AACA,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,WAAW,MAAM,2BAA2B;AACnD,OAAOC,aAAa,MAAM,6BAA6B;AACvD,OAAOC,UAAU,MAAM,0BAA0B;AACjD,OAAOC,gBAAgB,MAAM,gCAAgC;AAC7D,OAAOC,GAAG,MAAM,mBAAmB;AACnC,OAAOC,SAAS,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElD,MAAMC,QAAQ,GAAGA,CAAC;EAAEC,MAAM;EAAEC,OAAO;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAClD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACmB,SAAS,EAAEC,YAAY,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACqB,KAAK,EAAEC,QAAQ,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACAC,SAAS,CAAC,MAAM;IACd,IAAIY,MAAM,IAAIE,QAAQ,EAAE;MACtBK,YAAY,CAAC,IAAI,CAAC;MAClBE,QAAQ,CAAC,IAAI,CAAC;MACd,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAY;QAC3B,IAAI;UACF,MAAMC,MAAM,GAAG,qCAAqCT,QAAQ,MAAM;UAClE,MAAMU,QAAQ,GAAG,MAAMC,KAAK,CAACF,MAAM,CAAC;UACpC,IAAI,CAACC,QAAQ,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;UAE3D,MAAMC,OAAO,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;UACrC,MAAMC,SAAS,GAAGC,GAAG,CAACC,eAAe,CAACJ,OAAO,CAAC;UAC9CX,SAAS,CAACa,SAAS,CAAC;QAEtB,CAAC,CAAC,OAAOG,GAAG,EAAE;UACZZ,QAAQ,CAACY,GAAG,CAACC,OAAO,CAAC;QACvB,CAAC,SAAS;UACRf,YAAY,CAAC,KAAK,CAAC;QACrB;MACF,CAAC;MACDG,QAAQ,CAAC,CAAC;IACZ;IACA,OAAO,MAAM;MACX,IAAIN,MAAM,EAAE;QACVe,GAAG,CAACI,eAAe,CAACnB,MAAM,CAAC;QAC3BC,SAAS,CAAC,IAAI,CAAC;MACjB;IACF,CAAC;IACD;EACF,CAAC,EAAE,CAACL,MAAM,EAAEE,QAAQ,CAAC,CAAC;EAEtB,oBACEJ,OAAA,CAACR,MAAM;IACLkC,IAAI,EAAExB,MAAO;IACbC,OAAO,EAAEA,OAAQ;IACjBwB,SAAS,EAAE,IAAK;IAChBC,QAAQ,EAAC,IAAI,CAAC;IAAA;IAAAC,QAAA,gBAEd7B,OAAA,CAACP,WAAW;MAAAoC,QAAA,GAAC,oCAEX,eAAA7B,OAAA,CAACL,UAAU;QACT,cAAW,OAAO;QAClBmC,OAAO,EAAE3B,OAAQ;QACjB4B,EAAE,EAAE;UACFC,QAAQ,EAAE,UAAU;UACpBC,KAAK,EAAE,CAAC;UACRC,GAAG,EAAE,CAAC;UACNC,KAAK,EAAGC,KAAK,IAAKA,KAAK,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG;QAC1C,CAAE;QAAAT,QAAA,eAEF7B,OAAA,CAACF,SAAS;UAAAyC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC,eAEd1C,OAAA,CAACN,aAAa;MAACiD,QAAQ;MAACZ,EAAE,EAAE;QAAEa,MAAM,EAAE;MAAO,CAAE;MAAAf,QAAA,GAC5CrB,SAAS,iBACRR,OAAA,CAACH,GAAG;QAACkC,EAAE,EAAE;UAAEc,OAAO,EAAE,MAAM;UAAEC,cAAc,EAAE,QAAQ;UAAEC,UAAU,EAAE,QAAQ;UAAEH,MAAM,EAAE;QAAO,CAAE;QAAAf,QAAA,eAC3F7B,OAAA,CAACJ,gBAAgB;UAAA2C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjB,CACN,EACAhC,KAAK,iBACFV,OAAA,CAACH,GAAG;QAACkC,EAAE,EAAE;UAAEc,OAAO,EAAE,MAAM;UAAEC,cAAc,EAAE,QAAQ;UAAEC,UAAU,EAAE,QAAQ;UAAEH,MAAM,EAAE;QAAO,CAAE;QAAAf,QAAA,eACzF7B,OAAA;UAAGgD,KAAK,EAAE;YAAEb,KAAK,EAAE;UAAM,CAAE;UAAAN,QAAA,GAAC,YAAK,EAACnB,KAAK;QAAA;UAAA6B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3C,CACR,EACApC,MAAM,IAAI,CAACI,KAAK,iBACfV,OAAA;QACEiD,GAAG,EAAE3C,MAAO;QACZ4C,KAAK,EAAE,WAAW9C,QAAQ,EAAG;QAC7B+C,KAAK,EAAC,MAAM;QACZP,MAAM,EAAC,MAAM;QACbI,KAAK,EAAE;UAAEI,MAAM,EAAE;QAAO;MAAE;QAAAb,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3B,CACF;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACY,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACV,CAAC;AAEb,CAAC;AAACrC,EAAA,CAnFIJ,QAAQ;AAAAoD,EAAA,GAARpD,QAAQ;AAoFdA,QAAQ,CAACqD,SAAS,GAAG;EACnBpD,MAAM,EAAEX,SAAS,CAACgE,IAAI,CAACC,UAAU;EACjCrD,OAAO,EAAEZ,SAAS,CAACkE,IAAI,CAACD,UAAU;EAClCpD,QAAQ,EAAEb,SAAS,CAACmE,SAAS,CAAC,CAC5BnE,SAAS,CAACoE,MAAM,EAChBpE,SAAS,CAACqE,MAAM,CACjB,CAAC,CAACJ;AACL,CAAC;AACD,eAAevD,QAAQ;AAAC,IAAAoD,EAAA;AAAAQ,YAAA,CAAAR,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}