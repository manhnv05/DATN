{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState, useCallback } from \"react\";\nimport instanceAPIMain from \"../../../../configapi\";\nexport const getDotGiamGia = params => instanceAPIMain.get(\"/dotGiamGia\", {\n  params\n});\nconst formatDate = date => date ? new Date(date).toISOString().split(\"T\")[0] : undefined;\nconst useGetDotGiamGia = (initialFilter = {}) => {\n  _s();\n  const [data, setData] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [pagination, setPagination] = useState({\n    page: 0,\n    size: 5,\n    totalElements: 0,\n    totalPages: 0,\n    last: false,\n    first: true\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [filter, setFilter] = useState(initialFilter);\n  const fetchData = useCallback(async () => {\n    try {\n      setLoading(true);\n      const res = await getDotGiamGia({\n        page: pagination.page,\n        size: pagination.size,\n        tenDotGiamGia: filter.tenDotGiamGia,\n        trangThai: filter.trangThai,\n        ngayBatDau: formatDate(filter.ngayBatDau),\n        ngayKetThuc: formatDate(filter.ngayKetThuc)\n      });\n      if (res.status === 200) {\n        const payload = res.data || {};\n        setData(payload.content || []);\n        setTotal(payload.totalElements || 0);\n        setPagination({\n          page: payload.number,\n          size: payload.size,\n          totalElements: payload.totalElements,\n          totalPages: payload.totalPages,\n          last: payload.last,\n          first: payload.first\n        });\n      } else {\n        throw res;\n      }\n    } catch (err) {\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  }, [filter.tenDotGiamGia, filter.trangThai, filter.ngayBatDau, filter.ngayKetThuc, pagination.page, pagination.size]);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  return {\n    data,\n    total,\n    pagination,\n    loading,\n    setPagination,\n    error,\n    filter,\n    setFilter,\n    refresh: fetchData\n  };\n};\n_s(useGetDotGiamGia, \"axgpKSznJbbZsbck3a1TBZXQ5YI=\");\nexport default useGetDotGiamGia;","map":{"version":3,"names":["useEffect","useState","useCallback","instanceAPIMain","getDotGiamGia","params","get","formatDate","date","Date","toISOString","split","undefined","useGetDotGiamGia","initialFilter","_s","data","setData","total","setTotal","pagination","setPagination","page","size","totalElements","totalPages","last","first","loading","setLoading","error","setError","filter","setFilter","fetchData","res","tenDotGiamGia","trangThai","ngayBatDau","ngayKetThuc","status","payload","content","number","err","refresh"],"sources":["D:/fashion-shirt-shop/DATN/src/main/resources/templates/fashionshop-ui/src/layouts/admin/GiamGia/hooks/useGetDotGiamGia.js"],"sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\r\nimport instanceAPIMain from \"../../../../configapi\";\r\n\r\n\r\nexport const getDotGiamGia = (params) =>\r\n    instanceAPIMain.get(\"/dotGiamGia\", {\r\n      params,\r\n    });\r\n\r\nconst formatDate = (date) =>\r\n    date ? new Date(date).toISOString().split(\"T\")[0] : undefined;\r\n\r\nconst useGetDotGiamGia = (initialFilter = {}) => {\r\n  const [data, setData] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  const [pagination, setPagination] = useState({\r\n    page: 0,\r\n    size: 5,\r\n    totalElements: 0,\r\n    totalPages: 0,\r\n    last: false,\r\n    first: true,\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [filter, setFilter] = useState(initialFilter);\r\n\r\n  const fetchData = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await getDotGiamGia({\r\n        page: pagination.page,\r\n        size: pagination.size,\r\n        tenDotGiamGia: filter.tenDotGiamGia,\r\n        trangThai: filter.trangThai,\r\n        ngayBatDau: formatDate(filter.ngayBatDau),\r\n        ngayKetThuc: formatDate(filter.ngayKetThuc),\r\n      });\r\n      if (res.status === 200) {\r\n        const payload = res.data || {};\r\n        setData(payload.content || []);\r\n        setTotal(payload.totalElements || 0);\r\n        setPagination({\r\n          page: payload.number,\r\n          size: payload.size,\r\n          totalElements: payload.totalElements,\r\n          totalPages: payload.totalPages,\r\n          last: payload.last,\r\n          first: payload.first,\r\n        });\r\n      } else {\r\n        throw res;\r\n      }\r\n    } catch (err) {\r\n      setError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [\r\n    filter.tenDotGiamGia,\r\n    filter.trangThai,\r\n    filter.ngayBatDau,\r\n    filter.ngayKetThuc,\r\n    pagination.page,\r\n    pagination.size,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  return {\r\n    data,\r\n    total,\r\n    pagination,\r\n    loading,\r\n    setPagination,\r\n    error,\r\n    filter,\r\n    setFilter,\r\n    refresh: fetchData,\r\n  };\r\n};\r\n\r\nexport default useGetDotGiamGia;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}