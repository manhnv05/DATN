{"ast":null,"code":"var _jsxFileName = \"D:\\\\fashion-shirt-shop\\\\DATN\\\\src\\\\main\\\\resources\\\\templates\\\\fashionshop-ui\\\\src\\\\layouts\\\\BanHangTaiQuay\\\\component\\\\AddCustomerDialog.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Dialog, DialogTitle, DialogContent, DialogActions, TextField, Button, CircularProgress, IconButton, Typography, Divider, Radio, RadioGroup, FormControlLabel, FormLabel, FormControl, Autocomplete } from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport axios from \"axios\";\nimport dayjs from \"dayjs\";\nimport PropTypes from \"prop-types\";\n\n// === THAY ĐỔI: API ENDPOINTS CỦA GIAO HÀNG NHANH ===\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GHN_API_BASE_URL = \"https://online-gateway.ghn.vn/shiip/public-api/master-data\";\nconst GHN_API_TOKEN = \"03b71be1-6891-11f0-9e03-7626358ab3e0\"; // <<< !!! THAY THẾ BẰNG TOKEN CỦA BẠN !!!\n\nconst GHN_API_CONFIG = {\n  headers: {\n    token: GHN_API_TOKEN\n  }\n};\nconst initialCustomerState = {\n  tenKhachHang: \"\",\n  email: \"\",\n  soDienThoai: \"\",\n  ngaySinh: \"\",\n  gioiTinh: \"\",\n  address: {\n    diaChiChiTiet: \"\"\n  }\n};\nfunction AddCustomerDialog({\n  open,\n  onClose,\n  onCustomerAdded,\n  showNotification\n}) {\n  _s();\n  const [newCustomer, setNewCustomer] = useState(initialCustomerState);\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  // === STATE MỚI CHO VIỆC CHỌN ĐỊA CHỈ (GHN) ===\n  const [provinces, setProvinces] = useState([]);\n  const [districts, setDistricts] = useState([]); // Thêm state cho Quận/Huyện\n  const [wards, setWards] = useState([]);\n  const [selectedProvince, setSelectedProvince] = useState(null);\n  const [selectedDistrict, setSelectedDistrict] = useState(null); // Thêm state cho lựa chọn Quận/Huyện\n  const [selectedWard, setSelectedWard] = useState(null);\n  // ===============================================\n\n  // Reset state khi dialog được mở\n  useEffect(() => {\n    if (open) {\n      setNewCustomer(initialCustomerState);\n      setErrors({});\n      setSelectedProvince(null);\n      setSelectedDistrict(null);\n      setSelectedWard(null);\n      setProvinces([]);\n      setDistricts([]);\n      setWards([]);\n    }\n  }, [open]);\n\n  // === API LOGIC: LẤY DỮ LIỆU ĐỊA CHỈ TỪ GHN ===\n\n  // 1. Lấy danh sách Tỉnh/Thành phố khi dialog mở\n  useEffect(() => {\n    if (open) {\n      const fetchProvinces = async () => {\n        try {\n          const response = await axios.get(`${GHN_API_BASE_URL}/province`, GHN_API_CONFIG);\n          if (Array.isArray(response.data.data)) {\n            setProvinces(response.data.data);\n          }\n        } catch (error) {\n          console.error(\"Lỗi API Tỉnh/Thành phố (GHN):\", error);\n          showNotification({\n            open: true,\n            message: \"Không thể tải danh sách Tỉnh/Thành. Vui lòng kiểm tra token API.\",\n            severity: \"error\"\n          });\n        }\n      };\n      fetchProvinces();\n    }\n  }, [open, showNotification]);\n\n  // 2. Lấy danh sách Quận/Huyện khi Tỉnh/Thành phố thay đổi\n  useEffect(() => {\n    if (selectedProvince) {\n      const fetchDistricts = async () => {\n        try {\n          const response = await axios.get(`${GHN_API_BASE_URL}/district?province_id=${selectedProvince.ProvinceID}`, GHN_API_CONFIG);\n          if (Array.isArray(response.data.data)) {\n            setDistricts(response.data.data);\n          }\n        } catch (error) {\n          console.error(\"Lỗi API Quận/Huyện (GHN):\", error);\n        }\n      };\n      fetchDistricts();\n    }\n    // Reset các lựa chọn cấp dưới khi chọn lại tỉnh\n    setDistricts([]);\n    setWards([]);\n    setSelectedDistrict(null);\n    setSelectedWard(null);\n  }, [selectedProvince]);\n\n  // 3. Lấy danh sách Xã/Phường khi Quận/Huyện thay đổi\n  useEffect(() => {\n    if (selectedDistrict) {\n      const fetchWards = async () => {\n        try {\n          const response = await axios.get(`${GHN_API_BASE_URL}/ward?district_id=${selectedDistrict.DistrictID}`, GHN_API_CONFIG);\n          if (Array.isArray(response.data.data)) {\n            setWards(response.data.data);\n          }\n        } catch (error) {\n          console.error(\"Lỗi API Xã/Phường (GHN):\", error);\n        }\n      };\n      fetchWards();\n    }\n    // Reset lựa chọn xã khi chọn lại huyện\n    setWards([]);\n    setSelectedWard(null);\n  }, [selectedDistrict]);\n  // ========================================\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    if (name === \"diaChiChiTiet\") {\n      setNewCustomer(prev => ({\n        ...prev,\n        address: {\n          ...prev.address,\n          diaChiChiTiet: value\n        }\n      }));\n    } else {\n      setNewCustomer(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: undefined\n      }));\n    }\n  };\n\n  // Cập nhật hàm validate\n  const validateForm = () => {\n    const newErrors = {};\n    if (!newCustomer.tenKhachHang.trim()) newErrors.tenKhachHang = \"Tên không được để trống.\";\n    if (!newCustomer.email.trim()) newErrors.email = \"Email không được để trống.\";else if (!/\\S+@\\S+\\.\\S+/.test(newCustomer.email)) newErrors.email = \"Email không hợp lệ.\";\n    if (!newCustomer.soDienThoai.trim()) newErrors.soDienThoai = \"Số điện thoại không được để trống.\";else if (!/^\\d{10,11}$/.test(newCustomer.soDienThoai)) newErrors.soDienThoai = \"Số điện thoại không hợp lệ.\";\n    if (!newCustomer.gioiTinh) newErrors.gioiTinh = \"Vui lòng chọn giới tính.\";\n\n    // Validate cho địa chỉ\n    if (!selectedProvince) newErrors.tinhThanhPho = \"Vui lòng chọn Tỉnh/Thành phố.\";\n    if (!selectedDistrict) newErrors.quanHuyen = \"Vui lòng chọn Quận/Huyện.\"; // Thêm validate Quận/Huyện\n    if (!selectedWard) newErrors.xaPhuong = \"Vui lòng chọn Xã/Phường.\";\n    if (!newCustomer.address.diaChiChiTiet.trim()) newErrors.diaChiChiTiet = \"Vui lòng nhập địa chỉ chi tiết.\";\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Cập nhật hàm thêm mới\n  const handleAddNewCustomer = async () => {\n    if (!validateForm()) return;\n    setLoading(true);\n    const payload = {\n      khachHang: {\n        tenKhachHang: newCustomer.tenKhachHang,\n        email: newCustomer.email,\n        sdt: newCustomer.soDienThoai,\n        gioiTinh: newCustomer.gioiTinh === \"Nam\" ? 1 : newCustomer.gioiTinh === \"Nữ\" ? 0 : 2,\n        ngaySinh: newCustomer.ngaySinh ? dayjs(newCustomer.ngaySinh).format(\"YYYY-MM-DD\") : null,\n        trangThai: 1\n      },\n      diaChi: {\n        tinhThanhPho: selectedProvince ? selectedProvince.ProvinceName : null,\n        quanHuyen: selectedDistrict ? selectedDistrict.DistrictName : null,\n        // Thêm quận/huyện\n        xaPhuong: selectedWard ? selectedWard.WardName : null,\n        diaChiChiTiet: newCustomer.address.diaChiChiTiet,\n        // Gửi cả địa chỉ chi tiết\n        trangThai: 1\n      }\n    };\n    try {\n      await axios.post(\"http://localhost:8080/khachHang/with-address\", payload);\n      showNotification({\n        open: true,\n        message: \"Thêm khách hàng thành công!\",\n        severity: \"success\"\n      });\n      onCustomerAdded();\n      onClose();\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      console.error(\"Lỗi khi thêm khách hàng:\", err.response || err);\n      const apiError = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Đã xảy ra lỗi khi thêm khách hàng.\";\n      showNotification({\n        open: true,\n        message: apiError,\n        severity: \"error\"\n      });\n      if ((_err$response2 = err.response) !== null && _err$response2 !== void 0 && (_err$response2$data = _err$response2.data) !== null && _err$response2$data !== void 0 && _err$response2$data.errors) {\n        setErrors(err.response.data.errors);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: open,\n    onClose: onClose,\n    maxWidth: \"sm\",\n    fullWidth: true,\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      sx: {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\"\n      },\n      children: [\"Th\\xEAm kh\\xE1ch h\\xE0ng\", /*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"close\",\n        onClick: onClose,\n        children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      dividers: true,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        label: \"T\\xEAn kh\\xE1ch h\\xE0ng\",\n        name: \"tenKhachHang\",\n        fullWidth: true,\n        margin: \"normal\",\n        value: newCustomer.tenKhachHang,\n        onChange: handleChange,\n        error: !!errors.tenKhachHang,\n        helperText: errors.tenKhachHang\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Email\",\n        name: \"email\",\n        fullWidth: true,\n        margin: \"normal\",\n        value: newCustomer.email,\n        onChange: handleChange,\n        error: !!errors.email,\n        helperText: errors.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n        name: \"soDienThoai\",\n        fullWidth: true,\n        margin: \"normal\",\n        value: newCustomer.soDienThoai,\n        onChange: handleChange,\n        error: !!errors.soDienThoai,\n        helperText: errors.soDienThoai\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Ng\\xE0y sinh\",\n        name: \"ngaySinh\",\n        type: \"date\",\n        fullWidth: true,\n        margin: \"normal\",\n        value: newCustomer.ngaySinh,\n        onChange: handleChange,\n        InputLabelProps: {\n          shrink: true\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        component: \"fieldset\",\n        margin: \"normal\",\n        error: !!errors.gioiTinh,\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          component: \"legend\",\n          children: \"Gi\\u1EDBi t\\xEDnh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RadioGroup, {\n          row: true,\n          name: \"gioiTinh\",\n          value: newCustomer.gioiTinh,\n          onChange: handleChange,\n          children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n            value: \"Nam\",\n            control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 52\n            }, this),\n            label: \"Nam\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            value: \"N\\u1EEF\",\n            control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 51\n            }, this),\n            label: \"N\\u1EEF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            value: \"Kh\\xE1c\",\n            control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 53\n            }, this),\n            label: \"Kh\\xE1c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), errors.gioiTinh && /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"error\",\n          variant: \"caption\",\n          sx: {\n            pl: 2\n          },\n          children: errors.gioiTinh\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {\n        sx: {\n          my: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        children: \"\\u0110\\u1ECBa ch\\u1EC9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Autocomplete, {\n        options: provinces,\n        getOptionLabel: option => option.ProvinceName || \"\",\n        value: selectedProvince,\n        onChange: (event, newValue) => setSelectedProvince(newValue),\n        isOptionEqualToValue: (option, value) => option.ProvinceID === value.ProvinceID,\n        renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n          ...params,\n          label: \"T\\u1EC9nh/Th\\xE0nh ph\\u1ED1\",\n          margin: \"normal\",\n          error: !!errors.tinhThanhPho,\n          helperText: errors.tinhThanhPho\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Autocomplete, {\n        options: districts,\n        getOptionLabel: option => option.DistrictName || \"\",\n        value: selectedDistrict,\n        disabled: !selectedProvince,\n        onChange: (event, newValue) => setSelectedDistrict(newValue),\n        isOptionEqualToValue: (option, value) => option.DistrictID === value.DistrictID,\n        renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n          ...params,\n          label: \"Qu\\u1EADn/Huy\\u1EC7n\",\n          margin: \"normal\",\n          error: !!errors.quanHuyen,\n          helperText: errors.quanHuyen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Autocomplete, {\n        options: wards,\n        getOptionLabel: option => option.WardName || \"\",\n        value: selectedWard,\n        disabled: !selectedDistrict // Thay đổi disable dựa trên selectedDistrict\n        ,\n        onChange: (event, newValue) => setSelectedWard(newValue),\n        isOptionEqualToValue: (option, value) => option.WardCode === value.WardCode,\n        renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n          ...params,\n          label: \"X\\xE3/Ph\\u01B0\\u1EDDng\",\n          margin: \"normal\",\n          error: !!errors.xaPhuong,\n          helperText: errors.xaPhuong\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"\\u0110\\u1ECBa ch\\u1EC9 chi ti\\u1EBFt (S\\u1ED1 nh\\xE0, t\\xEAn \\u0111\\u01B0\\u1EDDng...)\",\n        name: \"diaChiChiTiet\",\n        fullWidth: true,\n        margin: \"normal\",\n        multiline: true,\n        rows: 2,\n        value: newCustomer.address.diaChiChiTiet,\n        onChange: handleChange,\n        error: !!errors.diaChiChiTiet,\n        helperText: errors.diaChiChiTiet\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: onClose,\n        color: \"secondary\",\n        children: \"H\\u1EE7y\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleAddNewCustomer,\n        color: \"info\",\n        variant: \"contained\",\n        disabled: loading,\n        children: loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 24,\n          color: \"inherit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 22\n        }, this) : \"Thêm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 5\n  }, this);\n}\n_s(AddCustomerDialog, \"TN89S/ICNHIoue39Fujp0FlDtQg=\");\n_c = AddCustomerDialog;\nAddCustomerDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onCustomerAdded: PropTypes.func.isRequired,\n  showNotification: PropTypes.func.isRequired\n};\nexport default AddCustomerDialog;\nvar _c;\n$RefreshReg$(_c, \"AddCustomerDialog\");","map":{"version":3,"names":["React","useState","useEffect","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Button","CircularProgress","IconButton","Typography","Divider","Radio","RadioGroup","FormControlLabel","FormLabel","FormControl","Autocomplete","CloseIcon","axios","dayjs","PropTypes","jsxDEV","_jsxDEV","GHN_API_BASE_URL","GHN_API_TOKEN","GHN_API_CONFIG","headers","token","initialCustomerState","tenKhachHang","email","soDienThoai","ngaySinh","gioiTinh","address","diaChiChiTiet","AddCustomerDialog","open","onClose","onCustomerAdded","showNotification","_s","newCustomer","setNewCustomer","loading","setLoading","errors","setErrors","provinces","setProvinces","districts","setDistricts","wards","setWards","selectedProvince","setSelectedProvince","selectedDistrict","setSelectedDistrict","selectedWard","setSelectedWard","fetchProvinces","response","get","Array","isArray","data","error","console","message","severity","fetchDistricts","ProvinceID","fetchWards","DistrictID","handleChange","e","name","value","target","prev","undefined","validateForm","newErrors","trim","test","tinhThanhPho","quanHuyen","xaPhuong","Object","keys","length","handleAddNewCustomer","payload","khachHang","sdt","format","trangThai","diaChi","ProvinceName","DistrictName","WardName","post","err","_err$response","_err$response$data","_err$response2","_err$response2$data","apiError","maxWidth","fullWidth","children","sx","display","justifyContent","alignItems","onClick","fileName","_jsxFileName","lineNumber","columnNumber","dividers","label","margin","onChange","helperText","type","InputLabelProps","shrink","component","row","control","color","variant","pl","my","gutterBottom","options","getOptionLabel","option","event","newValue","isOptionEqualToValue","renderInput","params","disabled","WardCode","multiline","rows","size","_c","propTypes","bool","isRequired","func","$RefreshReg$"],"sources":["D:/fashion-shirt-shop/DATN/src/main/resources/templates/fashionshop-ui/src/layouts/BanHangTaiQuay/component/AddCustomerDialog.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Button,\n  CircularProgress,\n  IconButton,\n  Typography,\n  Divider,\n  Radio,\n  RadioGroup,\n  FormControlLabel,\n  FormLabel,\n  FormControl,\n  Autocomplete,\n} from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport axios from \"axios\";\nimport dayjs from \"dayjs\";\nimport PropTypes from \"prop-types\";\n\n// === THAY ĐỔI: API ENDPOINTS CỦA GIAO HÀNG NHANH ===\nconst GHN_API_BASE_URL = \"https://online-gateway.ghn.vn/shiip/public-api/master-data\";\nconst GHN_API_TOKEN = \"03b71be1-6891-11f0-9e03-7626358ab3e0\"; // <<< !!! THAY THẾ BẰNG TOKEN CỦA BẠN !!!\n\nconst GHN_API_CONFIG = {\n  headers: {\n    token: GHN_API_TOKEN,\n  },\n};\n\nconst initialCustomerState = {\n  tenKhachHang: \"\",\n  email: \"\",\n  soDienThoai: \"\",\n  ngaySinh: \"\",\n  gioiTinh: \"\",\n  address: {\n    diaChiChiTiet: \"\",\n  },\n};\n\nfunction AddCustomerDialog({ open, onClose, onCustomerAdded, showNotification }) {\n  const [newCustomer, setNewCustomer] = useState(initialCustomerState);\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  // === STATE MỚI CHO VIỆC CHỌN ĐỊA CHỈ (GHN) ===\n  const [provinces, setProvinces] = useState([]);\n  const [districts, setDistricts] = useState([]); // Thêm state cho Quận/Huyện\n  const [wards, setWards] = useState([]);\n\n  const [selectedProvince, setSelectedProvince] = useState(null);\n  const [selectedDistrict, setSelectedDistrict] = useState(null); // Thêm state cho lựa chọn Quận/Huyện\n  const [selectedWard, setSelectedWard] = useState(null);\n  // ===============================================\n\n  // Reset state khi dialog được mở\n  useEffect(() => {\n    if (open) {\n      setNewCustomer(initialCustomerState);\n      setErrors({});\n      setSelectedProvince(null);\n      setSelectedDistrict(null);\n      setSelectedWard(null);\n      setProvinces([]);\n      setDistricts([]);\n      setWards([]);\n    }\n  }, [open]);\n\n  // === API LOGIC: LẤY DỮ LIỆU ĐỊA CHỈ TỪ GHN ===\n\n  // 1. Lấy danh sách Tỉnh/Thành phố khi dialog mở\n  useEffect(() => {\n    if (open) {\n      const fetchProvinces = async () => {\n        try {\n          const response = await axios.get(`${GHN_API_BASE_URL}/province`, GHN_API_CONFIG);\n          if (Array.isArray(response.data.data)) {\n            setProvinces(response.data.data);\n          }\n        } catch (error) {\n          console.error(\"Lỗi API Tỉnh/Thành phố (GHN):\", error);\n          showNotification({\n            open: true,\n            message: \"Không thể tải danh sách Tỉnh/Thành. Vui lòng kiểm tra token API.\",\n            severity: \"error\",\n          });\n        }\n      };\n      fetchProvinces();\n    }\n  }, [open, showNotification]);\n\n  // 2. Lấy danh sách Quận/Huyện khi Tỉnh/Thành phố thay đổi\n  useEffect(() => {\n    if (selectedProvince) {\n      const fetchDistricts = async () => {\n        try {\n          const response = await axios.get(\n            `${GHN_API_BASE_URL}/district?province_id=${selectedProvince.ProvinceID}`,\n            GHN_API_CONFIG\n          );\n          if (Array.isArray(response.data.data)) {\n            setDistricts(response.data.data);\n          }\n        } catch (error) {\n          console.error(\"Lỗi API Quận/Huyện (GHN):\", error);\n        }\n      };\n      fetchDistricts();\n    }\n    // Reset các lựa chọn cấp dưới khi chọn lại tỉnh\n    setDistricts([]);\n    setWards([]);\n    setSelectedDistrict(null);\n    setSelectedWard(null);\n  }, [selectedProvince]);\n\n  // 3. Lấy danh sách Xã/Phường khi Quận/Huyện thay đổi\n  useEffect(() => {\n    if (selectedDistrict) {\n      const fetchWards = async () => {\n        try {\n          const response = await axios.get(\n            `${GHN_API_BASE_URL}/ward?district_id=${selectedDistrict.DistrictID}`,\n            GHN_API_CONFIG\n          );\n          if (Array.isArray(response.data.data)) {\n            setWards(response.data.data);\n          }\n        } catch (error) {\n          console.error(\"Lỗi API Xã/Phường (GHN):\", error);\n        }\n      };\n      fetchWards();\n    }\n    // Reset lựa chọn xã khi chọn lại huyện\n    setWards([]);\n    setSelectedWard(null);\n  }, [selectedDistrict]);\n  // ========================================\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    if (name === \"diaChiChiTiet\") {\n      setNewCustomer((prev) => ({ ...prev, address: { ...prev.address, diaChiChiTiet: value } }));\n    } else {\n      setNewCustomer((prev) => ({ ...prev, [name]: value }));\n    }\n    if (errors[name]) {\n      setErrors((prev) => ({ ...prev, [name]: undefined }));\n    }\n  };\n\n  // Cập nhật hàm validate\n  const validateForm = () => {\n    const newErrors = {};\n    if (!newCustomer.tenKhachHang.trim()) newErrors.tenKhachHang = \"Tên không được để trống.\";\n    if (!newCustomer.email.trim()) newErrors.email = \"Email không được để trống.\";\n    else if (!/\\S+@\\S+\\.\\S+/.test(newCustomer.email)) newErrors.email = \"Email không hợp lệ.\";\n    if (!newCustomer.soDienThoai.trim())\n      newErrors.soDienThoai = \"Số điện thoại không được để trống.\";\n    else if (!/^\\d{10,11}$/.test(newCustomer.soDienThoai))\n      newErrors.soDienThoai = \"Số điện thoại không hợp lệ.\";\n    if (!newCustomer.gioiTinh) newErrors.gioiTinh = \"Vui lòng chọn giới tính.\";\n\n    // Validate cho địa chỉ\n    if (!selectedProvince) newErrors.tinhThanhPho = \"Vui lòng chọn Tỉnh/Thành phố.\";\n    if (!selectedDistrict) newErrors.quanHuyen = \"Vui lòng chọn Quận/Huyện.\"; // Thêm validate Quận/Huyện\n    if (!selectedWard) newErrors.xaPhuong = \"Vui lòng chọn Xã/Phường.\";\n    if (!newCustomer.address.diaChiChiTiet.trim())\n      newErrors.diaChiChiTiet = \"Vui lòng nhập địa chỉ chi tiết.\";\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Cập nhật hàm thêm mới\n  const handleAddNewCustomer = async () => {\n    if (!validateForm()) return;\n    setLoading(true);\n\n    const payload = {\n      khachHang: {\n        tenKhachHang: newCustomer.tenKhachHang,\n        email: newCustomer.email,\n        sdt: newCustomer.soDienThoai,\n        gioiTinh: newCustomer.gioiTinh === \"Nam\" ? 1 : newCustomer.gioiTinh === \"Nữ\" ? 0 : 2,\n        ngaySinh: newCustomer.ngaySinh ? dayjs(newCustomer.ngaySinh).format(\"YYYY-MM-DD\") : null,\n        trangThai: 1,\n      },\n      diaChi: {\n        tinhThanhPho: selectedProvince ? selectedProvince.ProvinceName : null,\n        quanHuyen: selectedDistrict ? selectedDistrict.DistrictName : null, // Thêm quận/huyện\n        xaPhuong: selectedWard ? selectedWard.WardName : null,\n        diaChiChiTiet: newCustomer.address.diaChiChiTiet, // Gửi cả địa chỉ chi tiết\n        trangThai: 1,\n      },\n    };\n\n    try {\n      await axios.post(\"http://localhost:8080/khachHang/with-address\", payload);\n      showNotification({ open: true, message: \"Thêm khách hàng thành công!\", severity: \"success\" });\n      onCustomerAdded();\n      onClose();\n    } catch (err) {\n      console.error(\"Lỗi khi thêm khách hàng:\", err.response || err);\n      const apiError = err.response?.data?.message || \"Đã xảy ra lỗi khi thêm khách hàng.\";\n      showNotification({ open: true, message: apiError, severity: \"error\" });\n      if (err.response?.data?.errors) {\n        setErrors(err.response.data.errors);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\n      <DialogTitle sx={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n        Thêm khách hàng\n        <IconButton aria-label=\"close\" onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent dividers>\n        {/* Các trường thông tin cá nhân (giữ nguyên) */}\n        <TextField\n          label=\"Tên khách hàng\"\n          name=\"tenKhachHang\"\n          fullWidth\n          margin=\"normal\"\n          value={newCustomer.tenKhachHang}\n          onChange={handleChange}\n          error={!!errors.tenKhachHang}\n          helperText={errors.tenKhachHang}\n        />\n        <TextField\n          label=\"Email\"\n          name=\"email\"\n          fullWidth\n          margin=\"normal\"\n          value={newCustomer.email}\n          onChange={handleChange}\n          error={!!errors.email}\n          helperText={errors.email}\n        />\n        <TextField\n          label=\"Số điện thoại\"\n          name=\"soDienThoai\"\n          fullWidth\n          margin=\"normal\"\n          value={newCustomer.soDienThoai}\n          onChange={handleChange}\n          error={!!errors.soDienThoai}\n          helperText={errors.soDienThoai}\n        />\n        <TextField\n          label=\"Ngày sinh\"\n          name=\"ngaySinh\"\n          type=\"date\"\n          fullWidth\n          margin=\"normal\"\n          value={newCustomer.ngaySinh}\n          onChange={handleChange}\n          InputLabelProps={{ shrink: true }}\n        />\n        <FormControl component=\"fieldset\" margin=\"normal\" error={!!errors.gioiTinh}>\n          <FormLabel component=\"legend\">Giới tính</FormLabel>\n          <RadioGroup row name=\"gioiTinh\" value={newCustomer.gioiTinh} onChange={handleChange}>\n            <FormControlLabel value=\"Nam\" control={<Radio />} label=\"Nam\" />\n            <FormControlLabel value=\"Nữ\" control={<Radio />} label=\"Nữ\" />\n            <FormControlLabel value=\"Khác\" control={<Radio />} label=\"Khác\" />\n          </RadioGroup>\n          {errors.gioiTinh && (\n            <Typography color=\"error\" variant=\"caption\" sx={{ pl: 2 }}>\n              {errors.gioiTinh}\n            </Typography>\n          )}\n        </FormControl>\n\n        <Divider sx={{ my: 2 }} />\n\n        {/* === THAY ĐỔI: SỬ DỤNG AUTOCOMPLETE CHO ĐỊA CHỈ (GHN) === */}\n        <Typography variant=\"h6\" gutterBottom>\n          Địa chỉ\n        </Typography>\n\n        <Autocomplete\n          options={provinces}\n          getOptionLabel={(option) => option.ProvinceName || \"\"}\n          value={selectedProvince}\n          onChange={(event, newValue) => setSelectedProvince(newValue)}\n          isOptionEqualToValue={(option, value) => option.ProvinceID === value.ProvinceID}\n          renderInput={(params) => (\n            <TextField\n              {...params}\n              label=\"Tỉnh/Thành phố\"\n              margin=\"normal\"\n              error={!!errors.tinhThanhPho}\n              helperText={errors.tinhThanhPho}\n            />\n          )}\n        />\n\n        {/* --- THÊM AUTOCOMPLETE CHO QUẬN/HUYỆN --- */}\n        <Autocomplete\n          options={districts}\n          getOptionLabel={(option) => option.DistrictName || \"\"}\n          value={selectedDistrict}\n          disabled={!selectedProvince}\n          onChange={(event, newValue) => setSelectedDistrict(newValue)}\n          isOptionEqualToValue={(option, value) => option.DistrictID === value.DistrictID}\n          renderInput={(params) => (\n            <TextField\n              {...params}\n              label=\"Quận/Huyện\"\n              margin=\"normal\"\n              error={!!errors.quanHuyen}\n              helperText={errors.quanHuyen}\n            />\n          )}\n        />\n        {/* -------------------------------------- */}\n\n        <Autocomplete\n          options={wards}\n          getOptionLabel={(option) => option.WardName || \"\"}\n          value={selectedWard}\n          disabled={!selectedDistrict} // Thay đổi disable dựa trên selectedDistrict\n          onChange={(event, newValue) => setSelectedWard(newValue)}\n          isOptionEqualToValue={(option, value) => option.WardCode === value.WardCode}\n          renderInput={(params) => (\n            <TextField\n              {...params}\n              label=\"Xã/Phường\"\n              margin=\"normal\"\n              error={!!errors.xaPhuong}\n              helperText={errors.xaPhuong}\n            />\n          )}\n        />\n\n        <TextField\n          label=\"Địa chỉ chi tiết (Số nhà, tên đường...)\"\n          name=\"diaChiChiTiet\"\n          fullWidth\n          margin=\"normal\"\n          multiline\n          rows={2}\n          value={newCustomer.address.diaChiChiTiet}\n          onChange={handleChange}\n          error={!!errors.diaChiChiTiet}\n          helperText={errors.diaChiChiTiet}\n        />\n        {/* =================================================== */}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"secondary\">\n          Hủy\n        </Button>\n        <Button onClick={handleAddNewCustomer} color=\"info\" variant=\"contained\" disabled={loading}>\n          {loading ? <CircularProgress size={24} color=\"inherit\" /> : \"Thêm\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nAddCustomerDialog.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onCustomerAdded: PropTypes.func.isRequired,\n  showNotification: PropTypes.func.isRequired,\n};\n\nexport default AddCustomerDialog;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}