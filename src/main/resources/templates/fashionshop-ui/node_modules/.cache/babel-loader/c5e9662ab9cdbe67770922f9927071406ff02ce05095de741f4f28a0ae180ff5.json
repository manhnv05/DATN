{"ast":null,"code":"var _jsxFileName = \"D:\\\\fashion-shirt-shop\\\\DATN\\\\src\\\\main\\\\resources\\\\templates\\\\fashionshop-ui\\\\src\\\\layouts\\\\admin\\\\HoaDon\\\\OrderDetail\\\\OrderSummary.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styles from './OrderSummary.module.css';\nimport PropTypes from 'prop-types';\n\n// Component giờ sẽ nhận vào prop `orderId`\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderSummary = ({\n  orderId\n}) => {\n  _s();\n  // State để lưu dữ liệu lấy từ API\n  const [orderData, setOrderData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // useEffect sẽ được gọi khi component render hoặc khi `orderId` thay đổi\n  useEffect(() => {\n    if (!orderId) {\n      setLoading(false);\n      setError(\"Không có ID hóa đơn để tải dữ liệu.\");\n      return;\n    }\n    const fetchOrderSummary = async () => {\n      setLoading(true);\n      try {\n        const response = await fetch(`http://localhost:8080/api/hoa-don/get-thong-tin-hoa-don/${orderId}`);\n        if (!response.ok) {\n          throw new Error(\"Lỗi khi tải dữ liệu hóa đơn.\");\n          console.log(\"Lỗi khi tải dữ liệu hóa đơn:\", response.statusText);\n        }\n        const responseData = await response.json();\n\n        // Ánh xạ dữ liệu từ API vào một đối tượng có cấu trúc mà JSX cần\n        const formattedData = {\n          discountCode: responseData.data.phieuGiamGia || 'Không có',\n          shopDiscount: 0,\n          // API không có trường này\n          totalItemsPrice: responseData.data.tongTienHang,\n          totalDiscount: responseData.data.giamGia,\n          shippingFee: responseData.data.phiVanChuyen,\n          totalAmount: responseData.data.tongHoaDon\n        };\n        setOrderData(formattedData);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchOrderSummary();\n  }, [orderId]); // Dependency array, đảm bảo API được gọi lại nếu orderId thay đổi\n\n  // Xử lý các trạng thái loading và error\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['order-summary'],\n      children: \"\\u0110ang t\\u1EA3i...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 16\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['order-summary'],\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 16\n    }, this);\n  }\n  if (!orderData) {\n    return null; // Không hiển thị gì nếu không có dữ liệu\n  }\n\n  // Giao diện không thay đổi, chỉ thay `order` bằng `orderData` từ state\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles['order-summary'],\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['summary-row'],\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Phi\\u1EBFu gi\\u1EA3m gi\\xE1:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.value,\n        children: orderData.discountCode\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['summary-row'],\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"T\\u1ED5ng ti\\u1EC1n h\\xE0ng:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.value,\n        children: [orderData.totalItemsPrice.toLocaleString('vi-VN'), \" VND\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['summary-row'],\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Gi\\u1EA3m gi\\xE1:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.value,\n        children: [orderData.totalDiscount.toLocaleString('vi-VN'), \" VND\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles['summary-row'],\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Ph\\xED v\\u1EADn chuy\\u1EC3n:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: orderData.shippingFee.toLocaleString('vi-VN'),\n        className: styles['shipping-input'],\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles['summary-row']} ${styles['total-amount']}`,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"T\\u1ED5ng ti\\u1EC1n:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.value,\n        children: [orderData.totalAmount.toLocaleString('vi-VN'), \" VND\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n\n// Cập nhật lại PropTypes để nhận `orderId`\n_s(OrderSummary, \"a8CcFS5F55uHS3HiS6cMdqzGEKU=\");\n_c = OrderSummary;\nOrderSummary.propTypes = {\n  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired\n};\nexport default OrderSummary;\nvar _c;\n$RefreshReg$(_c, \"OrderSummary\");","map":{"version":3,"names":["React","useState","useEffect","styles","PropTypes","jsxDEV","_jsxDEV","OrderSummary","orderId","_s","orderData","setOrderData","loading","setLoading","error","setError","fetchOrderSummary","response","fetch","ok","Error","console","log","statusText","responseData","json","formattedData","discountCode","data","phieuGiamGia","shopDiscount","totalItemsPrice","tongTienHang","totalDiscount","giamGia","shippingFee","phiVanChuyen","totalAmount","tongHoaDon","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","value","toLocaleString","type","readOnly","_c","propTypes","oneOfType","string","number","isRequired","$RefreshReg$"],"sources":["D:/fashion-shirt-shop/DATN/src/main/resources/templates/fashionshop-ui/src/layouts/admin/HoaDon/OrderDetail/OrderSummary.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styles from './OrderSummary.module.css';\nimport PropTypes from 'prop-types';\n\n// Component giờ sẽ nhận vào prop `orderId`\nconst OrderSummary = ({ orderId }) => {\n    // State để lưu dữ liệu lấy từ API\n    const [orderData, setOrderData] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    // useEffect sẽ được gọi khi component render hoặc khi `orderId` thay đổi\n    useEffect(() => {\n        if (!orderId) {\n            setLoading(false);\n            setError(\"Không có ID hóa đơn để tải dữ liệu.\");\n            return;\n        }\n\n        const fetchOrderSummary = async () => {\n            setLoading(true);\n            try {\n                const response = await fetch(`http://localhost:8080/api/hoa-don/get-thong-tin-hoa-don/${orderId}`);\n                if (!response.ok) {\n                    throw new Error(\"Lỗi khi tải dữ liệu hóa đơn.\");\n                    console.log(\"Lỗi khi tải dữ liệu hóa đơn:\", response.statusText);\n                }\n                const responseData = await response.json();\n                \n                // Ánh xạ dữ liệu từ API vào một đối tượng có cấu trúc mà JSX cần\n                const formattedData = {\n                    discountCode: responseData.data.phieuGiamGia || 'Không có',\n                    shopDiscount: 0, // API không có trường này\n                    totalItemsPrice: responseData.data.tongTienHang,\n                    totalDiscount: responseData.data.giamGia,\n                    shippingFee: responseData.data.phiVanChuyen,\n                    totalAmount: responseData.data.tongHoaDon,\n                };\n                \n                setOrderData(formattedData);\n            } catch (err) {\n                setError(err.message);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchOrderSummary();\n    }, [orderId]); // Dependency array, đảm bảo API được gọi lại nếu orderId thay đổi\n\n    // Xử lý các trạng thái loading và error\n    if (loading) {\n        return <div className={styles['order-summary']}>Đang tải...</div>;\n    }\n    if (error) {\n        return <div className={styles['order-summary']} style={{color: 'red'}}>{error}</div>;\n    }\n    if (!orderData) {\n        return null; // Không hiển thị gì nếu không có dữ liệu\n    }\n\n    // Giao diện không thay đổi, chỉ thay `order` bằng `orderData` từ state\n    return (\n        <div className={styles['order-summary']}>\n            <div className={styles['summary-row']}>\n                <p>Phiếu giảm giá:</p>\n                <p className={styles.value}>{orderData.discountCode}</p>\n            </div>\n            {/* <div className={styles['summary-row']}>\n                <p>Giảm giá từ cửa hàng:</p>\n                <p className={styles.value}>{orderData.shopDiscount}</p>\n            </div> */}\n            <div className={styles['summary-row']}>\n                <p>Tổng tiền hàng:</p>\n                <p className={styles.value}>\n                    {orderData.totalItemsPrice.toLocaleString('vi-VN')} VND\n                </p>\n            </div>\n            <div className={styles['summary-row']}>\n                <p>Giảm giá:</p>\n                <p className={styles.value}>\n                    {orderData.totalDiscount.toLocaleString('vi-VN')} VND\n                </p>\n            </div>\n            <div className={styles['summary-row']}>\n                <p>Phí vận chuyển:</p>\n                <input\n                    type=\"text\"\n                    value={orderData.shippingFee.toLocaleString('vi-VN')}\n                    className={styles['shipping-input']}\n                    readOnly\n                />\n            </div>\n            <div className={`${styles['summary-row']} ${styles['total-amount']}`}>\n                <p>Tổng tiền:</p>\n                <p className={styles.value}>\n                    {orderData.totalAmount.toLocaleString('vi-VN')} VND\n                </p>\n            </div>\n        </div>\n    );\n};\n\n// Cập nhật lại PropTypes để nhận `orderId`\nOrderSummary.propTypes = {\n    orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n};\n\nexport default OrderSummary;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}