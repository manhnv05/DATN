{"ast":null,"code":"var _jsxFileName = \"D:\\\\fashion-shirt-shop\\\\DATN\\\\src\\\\main\\\\resources\\\\templates\\\\fashionshop-ui\\\\src\\\\layouts\\\\HoaDon\\\\OrderDetail\\\\ProductList.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport styles from \"./ProductList.module.css\";\nimport PropTypes from \"prop-types\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE_SERVER_URL = \"http://localhost:8080/\";\nconst ProductList = ({\n  orderId,\n  orderStatus\n}) => {\n  _s();\n  const [orderData, setOrderData] = useState(null);\n  const [productsInOrder, setProductsInOrder] = useState([]);\n  useEffect(() => {\n    if (!orderId) {\n      setProducts([]);\n      return;\n    }\n    const fetchListProductOrder = async () => {\n      try {\n        // Gọi API bằng fetch, 'await' sẽ đợi cho đến khi có phản hồi\n        const response = await fetch(`http://localhost:8080/api/hoa-don/${orderId}/san-pham`);\n        if (!response.ok) {\n          throw new Error(`Lỗi HTTP! Trạng thái: ${response.status}`);\n        }\n\n        // Chuyển đổi phản hồi sang định dạng JSON, 'await' cũng sẽ đợi quá trình này\n        const data = await response.json();\n        setOrderData(data);\n        if (data && Array.isArray(data.data)) {\n          setProductsInOrder(data.data); // LƯU MẢNG NÀY VÀO state riêng\n        } else {\n          setProductsInOrder([]); // Đảm bảo luôn là mảng rỗng\n        }\n      } catch (error) {\n        console.error(\"Không thể fetch dữ liệu:\", error);\n        return null;\n      }\n    };\n    fetchListProductOrder();\n  }, [orderId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles[\"product-list\"],\n    children: [orderStatus === \"CHỜ XÁC NHẬN\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles[\"product-list-header\"],\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `${styles.btn} ${styles.btnConfirm}`,\n        children: \"Th\\xEAm s\\u1EA3n ph\\u1EA9m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this), productsInOrder.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Kh\\xF4ng c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o trong \\u0111\\u01A1n h\\xE0ng n\\xE0y.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this) :\n    // Map dữ liệu từ state 'products' đã được fetch ở trên\n    productsInOrder.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles[\"product-item\"],\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[\"product-image\"],\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: BASE_SERVER_URL + product.duongDanAnh,\n          alt: product.tenSanPham // Sử dụng 'tenSanPham' cho alt text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[\"product-details\"],\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles[\"product-name\"],\n          children: [product.tenSanPham, \" (\", product.maSanPhamChiTiet, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles[\"product-price\"],\n          children: [(product.thanhTien || 0).toLocaleString(\"vi-VN\"), \" VND\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles[\"product-info\"],\n          children: [\"Size: \", product.tenKichThuoc]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles[\"product-info\"],\n          children: [\"x\", product.soLuong]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[\"product-quantity-control\"],\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: product.soLuong\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[\"product-total-price\"],\n        children: [((product.gia || 0) * (product.soLuong || 0)).toLocaleString(\"vi-VN\"), \" VND\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this)]\n    }, product.id || product.maSanPhamChiTiet, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductList, \"jJHx6JryPMxYl0HRMYoFqDvQLMw=\");\n_c = ProductList;\nProductList.propTypes = {\n  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  orderStatus: PropTypes.string.isRequired,\n  products: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    name: PropTypes.string.isRequired,\n    price: PropTypes.number.isRequired,\n    quantity: PropTypes.number.isRequired\n  })).isRequired\n};\nexport default ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","styles","PropTypes","useState","useEffect","useCallback","jsxDEV","_jsxDEV","BASE_SERVER_URL","ProductList","orderId","orderStatus","_s","orderData","setOrderData","productsInOrder","setProductsInOrder","setProducts","fetchListProductOrder","response","fetch","ok","Error","status","data","json","Array","isArray","error","console","className","children","btn","btnConfirm","fileName","_jsxFileName","lineNumber","columnNumber","length","map","product","src","duongDanAnh","alt","tenSanPham","maSanPhamChiTiet","thanhTien","toLocaleString","tenKichThuoc","soLuong","gia","id","_c","propTypes","oneOfType","string","number","isRequired","products","arrayOf","shape","name","price","quantity","$RefreshReg$"],"sources":["D:/fashion-shirt-shop/DATN/src/main/resources/templates/fashionshop-ui/src/layouts/HoaDon/OrderDetail/ProductList.jsx"],"sourcesContent":["import React from \"react\";\n\nimport styles from \"./ProductList.module.css\";\nimport PropTypes from \"prop-types\";\nimport { useState, useEffect, useCallback } from \"react\";\nconst BASE_SERVER_URL = \"http://localhost:8080/\";\nconst ProductList = ({ orderId, orderStatus }) => {\n  const [orderData, setOrderData] = useState(null);\n  const [productsInOrder, setProductsInOrder] = useState([]);\n  useEffect(() => {\n    if (!orderId) {\n      setProducts([]);\n      return;\n    }\n    const fetchListProductOrder = async () => {\n      try {\n        // Gọi API bằng fetch, 'await' sẽ đợi cho đến khi có phản hồi\n        const response = await fetch(`http://localhost:8080/api/hoa-don/${orderId}/san-pham`);\n\n        if (!response.ok) {\n          throw new Error(`Lỗi HTTP! Trạng thái: ${response.status}`);\n        }\n\n        // Chuyển đổi phản hồi sang định dạng JSON, 'await' cũng sẽ đợi quá trình này\n        const data = await response.json();\n\n        setOrderData(data);\n        if (data && Array.isArray(data.data)) {\n          setProductsInOrder(data.data); // LƯU MẢNG NÀY VÀO state riêng\n        } else {\n          setProductsInOrder([]); // Đảm bảo luôn là mảng rỗng\n        }\n      } catch (error) {\n        console.error(\"Không thể fetch dữ liệu:\", error);\n\n        return null;\n      }\n    };\n    fetchListProductOrder();\n  }, [orderId]);\n\n  return (\n    <div className={styles[\"product-list\"]}>\n      {orderStatus === \"CHỜ XÁC NHẬN\" && (\n        <div className={styles[\"product-list-header\"]}>\n          <button className={`${styles.btn} ${styles.btnConfirm}`}>Thêm sản phẩm</button>\n        </div>\n      )}\n\n      {/* Kiểm tra nếu không có sản phẩm nào */}\n      {productsInOrder.length === 0 ? (\n        <div>Không có sản phẩm nào trong đơn hàng này.</div>\n      ) : (\n        // Map dữ liệu từ state 'products' đã được fetch ở trên\n        productsInOrder.map((product) => (\n          <div key={product.id || product.maSanPhamChiTiet} className={styles[\"product-item\"]}>\n            <div className={styles[\"product-image\"]}>\n              <img\n                src={BASE_SERVER_URL + product.duongDanAnh}\n                alt={product.tenSanPham} // Sử dụng 'tenSanPham' cho alt text\n              />\n            </div>\n            <div className={styles[\"product-details\"]}>\n              <p className={styles[\"product-name\"]}>\n                {product.tenSanPham} ({product.maSanPhamChiTiet})\n              </p>\n              <p className={styles[\"product-price\"]}>\n                {(product.thanhTien || 0).toLocaleString(\"vi-VN\")} VND\n              </p>\n              <p className={styles[\"product-info\"]}>Size: {product.tenKichThuoc}</p>\n              <p className={styles[\"product-info\"]}>x{product.soLuong}</p>\n            </div>\n            <div className={styles[\"product-quantity-control\"]}>\n              <button>-</button>\n              <span>{product.soLuong}</span>\n              <button>+</button>\n            </div>\n            <div className={styles[\"product-total-price\"]}>\n              {((product.gia || 0) * (product.soLuong || 0)).toLocaleString(\"vi-VN\")} VND\n            </div>\n          </div>\n        ))\n      )}\n    </div>\n  );\n};\nProductList.propTypes = {\n  orderId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  orderStatus: PropTypes.string.isRequired,\n  products: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n      name: PropTypes.string.isRequired,\n      price: PropTypes.number.isRequired,\n      quantity: PropTypes.number.isRequired,\n    })\n  ).isRequired,\n};\n\nexport default ProductList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}